/**
 * Helper
 * Create a chatbot with OpenAI artificial intelligence features for your website.
 * Exclusively on https://1.envato.market/helper
 *
 * @encoding        UTF-8
 * @version         1.0.25
 * @copyright       (C) 2018-2024 Merkulove ( https://merkulov.design/ ). All rights reserved.
 * @license         Envato License https://1.envato.market/KYbje
 * @contributors    Cherviakov Vlad (vladchervjakov@gmail.com), Nemirovskiy Vitaliy (nemirovskiyvitaliy@gmail.com), Dmytro Merkulov (dmitry@merkulov.design)
 * @support         help@merkulov.design
 **/
!function(e){"use strict";e(document).ready((function(){let t=window.mdpHelperUnity;e(".mdc-drawer__header > a.mdp-plugin-title").on("click",(function(t){t.preventDefault(),e("html, body").animate({scrollTop:0},500)})),e("#mdp-subscribe").on("click",(function(n){n.preventDefault();let i=e("#mdp-subscribe-mail"),r=e("#mdp-subscribe-name"),a=i.parent().data("mdc-index");if(i.val().length>0&&window.MerkulovMaterial[a].valid){const n=document.querySelector(".mdp-subscribe-form-message");r.prop("disabled",!0),i.prop("disabled",!0),e("#mdp-subscribe").prop("disabled",!0),e.ajax({type:"GET",url:`${t.restBase}helper/v2/subscribe`,crossDomain:!0,data:`name=${r.val()}&mail=${i.val()}`,success:function(e){(e=JSON.parse(e)).status?(n.classList.add("mdp-subscribe-form-message-success"),n.innerHTML=n.dataset.success,setTimeout((function(){n.style.display="none"}),7500)):(n.classList.add("mdp-subscribe-form-message-error"),n.innerHTML=n.dataset.error),n.style.display="block",setTimeout((function(){n.style.display="none"}),7500)},error:function(t){n.style.display="block",n.classList.add("mdp-subscribe-form-message-error"),n.innerHTML=n.dataset.warn,e("#mdp-subscribe-name").prop("disabled",!1),e("#mdp-subscribe-mail").prop("disabled",!1),e("#mdp-subscribe").prop("disabled",!1),setTimeout((function(){n.style.display="none"}),7500)}})}else window.MerkulovMaterial[a].valid=!1}));let n=e("#mdp-updates-btn");n.on("click",(function(i){i.preventDefault(),n.attr("disabled",!0).addClass("mdp-spin").find(".material-icons").text("refresh");let r={action:"check_updates_helper",nonce:t.nonce,checkUpdates:!0};e.post(t.ajaxURL,r,(function(e){e?(console.info("Latest version information updated."),location.reload()):console.warn(e)}),"json").fail((function(e){console.error(e),alert("Looks like an Error has occurred. Please try again later.")})).always((function(){n.attr("disabled",!1).removeClass("mdp-spin").find(".material-icons").text("autorenew")}))})),function(){let t=e("#mdp_custom_css_fld");if(!t.length)return;if(!wp.codeEditor)return;let n,i=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};i.codemirror=_.extend({},i.codemirror,{indentUnit:2,tabSize:2,mode:"css"}),n=wp.codeEditor.initialize("mdp_custom_css_fld",i),n.codemirror.on("change",(function(e){n.codemirror.save(),t.change()}))}(),e(".mdp-layout .mdp-nav-dropdown a").on("click",(function(t){t.preventDefault();let n=t.target,i=t.target.parentElement;"IMG"!==t.target.tagName&&(n=t.target.querySelector("img"),i=t.target);const r=i.getAttribute("data-val"),a=n.alt,s=e(".mdp-layout button img");s.attr("src",s.attr("src").replace(/(.*)\/.*(\.svg$)/i,"$1/"+r+"$2")),s.attr("alt",a),e(this).closest("td").find("input").val(r).change(),setTimeout((function(){e(".mdp-layout").removeClass("mdp-open")}),100),e(".mdp-layout .mdp-nav-dropdown a").removeClass("mdp-active"),e(this).addClass("mdp-active")})),jQuery(".mdc-media-library-field").each((function(){const e=jQuery(this).data("uid");jQuery(`#${e}-add`).click((function(t){let n;t.preventDefault(),n&&n.open(),n=wp.media({multiple:!1,library:{type:"image"}}),n.on("open",(()=>{let t=n.state().get("selection");jQuery(`input#${e}`).val().split(",").forEach((function(e){let n=wp.media.attachment(e);n.fetch(),t.add(n?[n]:[])}))})),n.on("close",(()=>{let t=n.state().get("selection"),i=[],r=0;t.each((function(e){i[r]=e.id,r++}));let a=i.join(",");if(0===a.length)return!0;jQuery(`input#${e}`).val(a),function(e,t){let n={action:"unity_media_library",id:e};jQuery.get(ajaxurl,n,(function(e){!0===e.success&&jQuery(`#${t}-preview-image`).replaceWith(e.data.image)}))}(a,e)})),n.open()})),jQuery(`#${e}-remove`).click((function(t){t.preventDefault(),console.log("remove"),jQuery(`input#${e}`).val(""),jQuery(`#${e}-preview-image`).replaceWith("")}))})),e(".mdp-controls-sides").each((function(){const t=e(this).find(".mdp-controls-sides-top input"),n=e(this).find(".mdp-controls-sides-right input"),i=e(this).find(".mdp-controls-sides-bottom input"),r=e(this).find(".mdp-controls-sides-left input"),a=e(this).find(".mdp-controls-sides-lock"),s=e(this).find(".mdp-controls-sides-lock input");let o=JSON.parse(s.val());function l(a){a.each((function(){o?(s.val("true"),e(this).on("change",(function(){t.val(this.value),n.val(this.value),i.val(this.value),r.val(this.value)})),e(this).on("focus",d)):(s.val("false"),e(this).off("change"),e(this).off("focus"))}))}function d(){const a=this,s=setInterval((()=>{t.val(a.value),n.val(a.value),i.val(a.value),r.val(a.value)}),100);e(this).on("blur",(function(){clearInterval(s)}))}t.attr("type","number"),n.attr("type","number"),i.attr("type","number"),r.attr("type","number"),l(e(this).find(".mdp-controls-sides-single input")),o&&a.addClass("active-lock"),a.on("click",(function(){a.toggleClass("active-lock"),o=a.hasClass("active-lock"),l(e(this).parent().find(".mdp-controls-sides-single input"))}))}));const i=document.querySelector("#mdp_envato_purchase_code"),r=document.querySelector(".mdp-activation-form .mdc-text-field-helper-text"),a=document.querySelector("#submit");if(i&&r){let e;sessionStorage.getItem("activationHelper")||sessionStorage.setItem("activationHelper",r.innerText),s(i.value.trim()),i.addEventListener("change",(e=>{s(e.target.value.trim())})),i.addEventListener("focus",(t=>{e=setInterval((()=>{s(t.target.value.trim())}),500)})),i.addEventListener("blur",(t=>{clearInterval(e)}))}function s(e){!function(e,t){t=t.trim();if(new RegExp("((\\d||\\w)\\w+){7}-(((\\d||\\w)\\w+){4}-){3}((\\d||\\w)\\w+){12}","g").test(t)&&36===t.length||0===t.length)return sessionStorage.getItem("activationHelper")&&(e.innerText=sessionStorage.getItem("activationHelper")),e.removeAttribute("style"),!0;const n=new RegExp("((\\d||[A-Z])\\w+){10}","g"),i=new RegExp("[A-Z]{4}(\\d){8}","g"),r=new RegExp("(\\d){9}","g"),{translation:a}=window.mdpHelperUnity;return n.test(t)&&10===t.length?(e.innerText!==a.pidErrorElements&&o(e,a.pidErrorElements),!1):i.test(t)&&12===t.length?(e.innerText!==a.pidErrorInvoice&&o(e,a.pidErrorInvoice),!1):r.test(t)&&9===t.length?(e.innerText!==a.pidErrorOrder&&o(e,a.pidErrorOrder),!1):(e.innerText!==a.pidError&&o(e,a.pidError),!1)}(r,e)?a.setAttribute("disabled","true"):a.removeAttribute("disabled")}function o(e,t){e.innerText=t,e.style.color="#ff495c",e.style.fontSize="14px"}}))}(jQuery);